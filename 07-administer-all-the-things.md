# Quáº£n Trá»‹ Má»i Thá»©

Trong bÃ i viáº¿t trÆ°á»›c cá»§a loáº¡t bÃ i [Hiá»ƒu vá» Django](https://www.mattlayman.com/understand-django/), chÃºng ta Ä‘Ã£ sá»­ dá»¥ng models Ä‘á»ƒ xem cÃ¡ch Django lÆ°u trá»¯ dá»¯ liá»‡u trong má»™t cÆ¡ sá»Ÿ dá»¯ liá»‡u quan há»‡. ChÃºng ta Ä‘Ã£ Ä‘á» cáº­p Ä‘áº¿n táº¥t cáº£ cÃ¡c cÃ´ng cá»¥ Ä‘á»ƒ Ä‘Æ°a dá»¯ liá»‡u cá»§a báº¡n vÃ o hoáº¡t Ä‘á»™ng trong á»©ng dá»¥ng. Trong bÃ i viáº¿t nÃ y, chÃºng ta sáº½ táº­p trung vÃ o cÃ¡c cÃ´ng cá»¥ tÃ­ch há»£p sáºµn mÃ  Django cung cáº¥p Ä‘á»ƒ giÃºp chÃºng ta quáº£n lÃ½ dá»¯ liá»‡u Ä‘Ã³.

1. [Tá»« TrÃ¬nh Duyá»‡t Äáº¿n Django](https://www.mattlayman.com/understand-django/browser-to-django/)
2. [URLs Dáº«n ÄÆ°á»ng](https://www.mattlayman.com/understand-django/urls-lead-way/)
3. [GÃ³c NhÃ¬n Vá» Views](https://www.mattlayman.com/understand-django/views-on-views/)
4. [Template Cho Giao Diá»‡n NgÆ°á»i DÃ¹ng](https://www.mattlayman.com/understand-django/templates-user-interfaces/)
5. [TÆ°Æ¡ng TÃ¡c NgÆ°á»i DÃ¹ng Vá»›i Forms](https://www.mattlayman.com/understand-django/user-interaction-forms/)
6. [LÆ°u Trá»¯ Dá»¯ Liá»‡u Vá»›i Models](https://www.mattlayman.com/understand-django/store-data-with-models/)
7. Quáº£n Trá»‹ Má»i Thá»©
8. [Giáº£i Pháº«u Má»™t á»¨ng Dá»¥ng](https://www.mattlayman.com/understand-django/anatomy-of-an-application/)
9. [XÃ¡c Thá»±c NgÆ°á»i DÃ¹ng](https://www.mattlayman.com/understand-django/user-authentication/)
10. [Middleware Báº¡n Äi ÄÃ¢u?](https://www.mattlayman.com/understand-django/middleware-do-you-go/)
11. [Phá»¥c Vá»¥ Static Files](https://www.mattlayman.com/understand-django/serving-static-files/)
12. [Kiá»ƒm Thá»­ á»¨ng Dá»¥ng](https://www.mattlayman.com/understand-django/test-your-apps/)
13. [Triá»ƒn Khai Trang Web](https://www.mattlayman.com/understand-django/deploy-site-live/)
14. [Dá»¯ Liá»‡u Theo Tá»«ng NgÆ°á»i DÃ¹ng Vá»›i Sessions](https://www.mattlayman.com/understand-django/sessions/)
15. [Hiá»ƒu Vá» Settings](https://www.mattlayman.com/understand-django/settings/)
16. [Quáº£n LÃ½ File NgÆ°á»i DÃ¹ng](https://www.mattlayman.com/understand-django/media-files/)
17. [Lá»‡nh Cho á»¨ng Dá»¥ng](https://www.mattlayman.com/understand-django/command-apps/)
18. [TÄƒng Tá»‘c Vá»›i Django](https://www.mattlayman.com/understand-django/go-fast/)
19. [Báº£o Máº­t VÃ  Django](https://www.mattlayman.com/understand-django/secure-apps/)
20. [Máº¹o VÃ  Ká»¹ Thuáº­t Gá»¡ Lá»—i](https://www.mattlayman.com/understand-django/debugging-tips-techniques/)

## Django Admin LÃ  GÃ¬?

Khi báº¡n váº­n hÃ nh má»™t á»©ng dá»¥ng, báº¡n sáº½ tháº¥y cÃ³ nhá»¯ng dá»¯ liá»‡u cáº§n Ä‘Æ°á»£c chÃº Ã½ Ä‘áº·c biá»‡t. CÃ³ thá»ƒ báº¡n Ä‘ang táº¡o má»™t blog vÃ  cáº§n táº¡o hoáº·c chá»‰nh sá»­a cÃ¡c tháº» hoáº·c danh má»¥c. CÃ³ thá»ƒ báº¡n cÃ³ má»™t cá»­a hÃ ng trá»±c tuyáº¿n vÃ  cáº§n quáº£n lÃ½ hÃ ng tá»“n kho. DÃ¹ báº¡n xÃ¢y dá»±ng gÃ¬ Ä‘i ná»¯a, báº¡n cÃ³ láº½ sáº½ pháº£i quáº£n lÃ½ _má»™t thá»© gÃ¬ Ä‘Ã³_.

LÃ m tháº¿ nÃ o Ä‘á»ƒ báº¡n quáº£n lÃ½ dá»¯ liá»‡u Ä‘Ã³?

- Náº¿u báº¡n lÃ  láº­p trÃ¬nh viÃªn, báº¡n cÃ³ thá»ƒ Ä‘Äƒng nháº­p vÃ o mÃ¡y chá»§, má»Ÿ shell quáº£n lÃ½ cá»§a Django vÃ  lÃ m viá»‡c trá»±c tiáº¿p vá»›i dá»¯ liá»‡u báº±ng Python.
- Náº¿u báº¡n khÃ´ng pháº£i láº­p trÃ¬nh viÃªn, á»«m, cÃ³ láº½ báº¡n khÃ´ng cÃ²n cÃ¡ch nÃ o! **KhÃ´ng, Ä‘iá»u Ä‘Ã³ khÃ´ng Ä‘Ãºng!**

Django bao gá»“m má»™t giao diá»‡n quáº£n trá»‹ web cÃ³ thá»ƒ giÃºp cáº£ láº­p trÃ¬nh viÃªn láº«n ngÆ°á»i khÃ´ng biáº¿t láº­p trÃ¬nh. Giao diá»‡n quáº£n trá»‹ nÃ y thÆ°á»ng Ä‘Æ°á»£c gá»i táº¯t lÃ  Django admin.

Giá»‘ng nhÆ° nhiá»u pháº§n má»Ÿ rá»™ng khÃ¡c trong há»‡ sinh thÃ¡i Django, trang admin lÃ  má»™t á»©ng dá»¥ng Django. Trang nÃ y Ä‘Æ°á»£c sá»­ dá»¥ng phá»• biáº¿n Ä‘áº¿n má»©c nÃ³ Ä‘Ã£ Ä‘Æ°á»£c cáº¥u hÃ¬nh sáºµn khi báº¡n cháº¡y lá»‡nh `startproject`.

TrÆ°á»›c khi tiáº¿p tá»¥c, tÃ´i muá»‘n lÆ°u Ã½ má»™t váº¥n Ä‘á» báº£o máº­t. Khi sá»­ dá»¥ng `startproject`, Django sáº½ Ä‘áº·t trang admin á»Ÿ Ä‘á»‹a chá»‰ `/admin/` theo máº·c Ä‘á»‹nh. **HÃ£y thay Ä‘á»•i Ä‘iá»u nÃ y**. Máº«u khá»Ÿi táº¡o giÃºp báº¡n thiáº¿t láº­p trang admin má»™t cÃ¡ch tiá»‡n lá»£i, nhÆ°ng URL máº·c Ä‘á»‹nh nÃ y khiáº¿n cho [script kiddies](https://en.wikipedia.org/wiki/Script_kiddie) dá»… dÃ ng táº¥n cÃ´ng trang admin cá»§a báº¡n Ä‘á»ƒ cá»‘ gáº¯ng truy cáº­p trÃ¡i phÃ©p. Äáº·t trang admin á»Ÿ má»™t URL khÃ¡c _khÃ´ng_ hoÃ n toÃ n báº£o vá»‡ trang cá»§a báº¡n (báº¡n khÃ´ng nÃªn dá»±a vÃ o â€œbáº£o máº­t nhá» che giáº¥uâ€), nhÆ°ng nÃ³ sáº½ giÃºp trÃ¡nh Ä‘Æ°á»£c nhiá»u cuá»™c táº¥n cÃ´ng tá»± Ä‘á»™ng.

Django admin cho phÃ©p báº¡n nhanh chÃ³ng tÆ°Æ¡ng tÃ¡c vá»›i cÃ¡c model cá»§a mÃ¬nh. NhÆ° báº¡n sáº½ tháº¥y ngay sau Ä‘Ã¢y, báº¡n cÃ³ thá»ƒ Ä‘Äƒng kÃ½ má»™t model vá»›i trang admin. Khi model Ä‘Ã£ Ä‘Æ°á»£c Ä‘Äƒng kÃ½, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng giao diá»‡n trang admin Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c thao tÃ¡c CRUD trÃªn dá»¯ liá»‡u.

CRUD lÃ  má»™t tá»« viáº¿t táº¯t mÃ´ táº£ cÃ¡c chá»©c nÄƒng chÃ­nh cá»§a nhiá»u trang web. CRUD lÃ  viáº¿t táº¯t cá»§a:

- **Create** - Má»™t trang web cÃ³ thá»ƒ táº¡o dá»¯ liá»‡u (tá»©c lÃ  chÃ¨n dá»¯ liá»‡u vÃ o cÆ¡ sá»Ÿ dá»¯ liá»‡u)
- **Read** - NgÆ°á»i dÃ¹ng cÃ³ thá»ƒ xem dá»¯ liá»‡u
- **Update** - Dá»¯ liá»‡u cÃ³ thá»ƒ Ä‘Æ°á»£c cáº­p nháº­t bá»Ÿi ngÆ°á»i dÃ¹ng
- **Delete** - NgÆ°á»i dÃ¹ng cÃ³ thá»ƒ xÃ³a dá»¯ liá»‡u khá»i há»‡ thá»‘ng

Náº¿u báº¡n nghÄ© vá» cÃ¡c hÃ nh Ä‘á»™ng mÃ  báº¡n thá»±c hiá»‡n trÃªn má»™t trang web, háº§u háº¿t cÃ¡c hÃ nh Ä‘á»™ng sáº½ thuá»™c má»™t trong bá»‘n loáº¡i trÃªn.

Trang admin cung cáº¥p cÃ¡c cÃ´ng cá»¥ Ä‘á»ƒ thá»±c hiá»‡n táº¥t cáº£ cÃ¡c thao tÃ¡c Ä‘Ã³. CÃ³ má»™t vÃ i trang chÃ­nh mÃ  báº¡n cÃ³ thá»ƒ Ä‘iá»u hÆ°á»›ng khi lÃ m viá»‡c vá»›i trang admin cá»§a Django, nÆ¡i cÃ¡c thao tÃ¡c CRUD diá»…n ra. Nhá»¯ng trang nÃ y cÃ³ sáºµn cho báº¡n mÃ  báº¡n chá»‰ cáº§n thá»±c hiá»‡n ráº¥t Ã­t thao tÃ¡c ngoÃ i viá»‡c Ä‘Äƒng kÃ½ mÃ  báº¡n sáº½ tháº¥y á»Ÿ pháº§n tiáº¿p theo.

1. Trang chá»‰ má»¥c admin - Trang nÃ y sáº½ hiá»ƒn thá»‹ táº¥t cáº£ cÃ¡c model, Ä‘Æ°á»£c nhÃ³m theo á»©ng dá»¥ng Django mÃ  chÃºng xuáº¥t phÃ¡t, Ä‘Ã£ Ä‘Æ°á»£c Ä‘Äƒng kÃ½ vá»›i admin.
2. Trang danh sÃ¡ch model - Trang danh sÃ¡ch hiá»ƒn thá»‹ cÃ¡c dÃ²ng dá»¯ liá»‡u tá»« má»™t model (tá»©c lÃ  má»™t báº£ng cÆ¡ sá»Ÿ dá»¯ liá»‡u). Tá»« trang nÃ y, quáº£n trá»‹ viÃªn cÃ³ thá»ƒ thá»±c hiá»‡n cÃ¡c hÃ nh Ä‘á»™ng trÃªn nhiá»u báº£n ghi cÆ¡ sá»Ÿ dá»¯ liá»‡u nhÆ° xÃ³a má»™t loáº¡t báº£n ghi chá»‰ vá»›i má»™t thao tÃ¡c.
3. Trang thÃªm model - Admin cung cáº¥p má»™t trang nÆ¡i báº¡n cÃ³ thá»ƒ táº¡o cÃ¡c instance model má»›i báº±ng cÃ¡c form Ä‘Æ°á»£c sinh tá»± Ä‘á»™ng dá»±a trÃªn cÃ¡c trÆ°á»ng cá»§a model.
4. Trang chá»‰nh sá»­a model - Trang chá»‰nh sá»­a cho phÃ©p báº¡n cáº­p nháº­t má»™t instance model hiá»‡n cÃ³ (tá»©c lÃ  má»™t dÃ²ng trong báº£ng cÆ¡ sá»Ÿ dá»¯ liá»‡u). Tá»« trang nÃ y, báº¡n cÅ©ng cÃ³ thá»ƒ xÃ³a má»™t instance model.

Náº¿u báº¡n xem xÃ©t bá»™ trang nhá» nÃ y, báº¡n sáº½ nháº­n ra ráº±ng má»i pháº§n cá»§a tá»« viáº¿t táº¯t CRUD Ä‘á»u cÃ³ thá»ƒ thá»±c hiá»‡n trong trang admin nÃ y. Quyá»n táº¡o vÃ  xÃ³a náº±m trong tay báº¡n. ğŸ˜ˆ

BÃ¢y giá» chÃºng ta Ä‘Ã£ hiá»ƒu nhá»¯ng gÃ¬ cÃ³ trong trang admin, hÃ£y táº­p trung vÃ o cÃ¡ch thÃªm model cá»§a báº¡n vÃ o admin.

## ÄÄƒng KÃ½ Model Vá»›i Admin

Äá»ƒ trang admin hiá»ƒn thá»‹ dá»¯ liá»‡u model cá»§a báº¡n, chÃºng ta cáº§n cáº­p nháº­t file `admin.py`. á» má»™t á»©ng dá»¥ng má»›i táº¡o báº±ng `startapp`, báº¡n sáº½ tháº¥y file `admin.py` háº§u nhÆ° trá»‘ng rá»—ng. ChÃºng ta cáº§n thÃªm má»™t chÃºt â€œkáº¿t dÃ­nhâ€ Ä‘á»ƒ admin biáº¿t vá» má»™t model.

Trang admin mong Ä‘á»£i má»™t class `ModelAdmin` cho má»—i model mÃ  báº¡n muá»‘n hiá»ƒn thá»‹ trong trang.

HÃ£y xem xÃ©t má»™t vÃ­ dá»¥ Ä‘Æ¡n giáº£n vá» model hÃ³a má»™t cuá»‘n sÃ¡ch.

```python
# application/models.py
from django.db import models

class Book(models.Model):
    title = models.CharField(
        max_length=256
    )
    author = models.CharField(
        max_length=256
    )
```

BÃ¢y giá» chÃºng ta cÃ³ thá»ƒ táº¡o má»™t class `ModelAdmin` cho model `Book`.

```python
# application/admin.py
from django.contrib import admin

from .models import Book

@admin.register(Book)
class BookAdmin(admin.ModelAdmin):
    pass
```

CÃ³ má»™t vÃ i Ä‘iá»ƒm quan trá»ng cáº§n chÃº Ã½ vá»›i file `admin.py` nÃ y.

1. `BookAdmin` lÃ  má»™t lá»›p con cá»§a `admin.ModelAdmin`.
2. `BookAdmin` Ä‘Æ°á»£c Ä‘Äƒng kÃ½ vá»›i trang admin báº±ng decorator `admin.register`.

Báº¡n cÅ©ng cÃ³ thá»ƒ Ä‘Äƒng kÃ½ má»™t class admin báº±ng cÃ¡ch gá»i `register` sau khi Ä‘á»‹nh nghÄ©a class náº¿u khÃ´ng muá»‘n dÃ¹ng decorator.

```python
# application/admin.py
from django.contrib import admin

from .models import Book

class BookAdmin(admin.ModelAdmin):
    pass

admin.site.register(Book, BookAdmin)
```

BÃ¢y giá» chÃºng ta Ä‘Ã£ cÃ³ má»™t model Ä‘Æ°á»£c Ä‘Äƒng kÃ½ vá»›i trang admin, lÃ m sao Ä‘á»ƒ xem nÃ³? HÃ£y khá»Ÿi Ä‘á»™ng server phÃ¡t triá»ƒn vá»›i `runserver` vÃ  truy cáº­p vÃ o URL mÃ  trÆ°á»›c Ä‘Ã¢y lÃ  `/admin/` (bá»Ÿi vÃ¬ báº¡n Ä‘Ã£ Ä‘á»•i sang má»™t Ä‘á»‹a chá»‰ khÃ¡c ngoÃ i `/admin/`, Ä‘Ãºng khÃ´ng? ÄÃºng chá»©!?).

TrÃªn trang nÃ y, báº¡n sáº½ gáº·p má»™t mÃ n hÃ¬nh Ä‘Äƒng nháº­p. ChÃºng ta chÆ°a tÃ¬m hiá»ƒu há»‡ thá»‘ng xÃ¡c thá»±c, nhÆ°ng hiá»‡n táº¡i báº¡n chá»‰ cáº§n biáº¿t ráº±ng chá»‰ nhá»¯ng tÃ i khoáº£n ngÆ°á»i dÃ¹ng cÃ³ quyá»n staff má»›i cÃ³ thá»ƒ Ä‘Äƒng nháº­p.

Django cung cáº¥p má»™t lá»‡nh cho phÃ©p chÃºng ta táº¡o tÃ i khoáº£n ngÆ°á»i dÃ¹ng cÃ³ quyá»n staff vÃ  táº¥t cáº£ cÃ¡c quyá»n khÃ¡c. Giá»‘ng nhÆ° há»‡ Ä‘iá»u hÃ nh Linux, tÃ i khoáº£n ngÆ°á»i dÃ¹ng cÃ³ má»i quyá»n Ä‘Æ°á»£c gá»i lÃ  superuser. Báº¡n cÃ³ thá»ƒ táº¡o tÃ i khoáº£n superuser vá»›i lá»‡nh `createsuperuser`.

```shell
$ ./manage.py createsuperuser
Username: matt
Email address: matt@somewhere.com
Password:
Password (again):
Superuser created successfully.
```

Khi Ä‘Ã£ cÃ³ tÃ i khoáº£n superuser, báº¡n Ä‘Ã£ sáºµn sÃ ng Ä‘Äƒng nháº­p vÃ o trang admin. VÃ¬ báº¡n sá»­ dá»¥ng tÃ i khoáº£n superuser, báº¡n sáº½ cÃ³ quyá»n xem má»i model Ä‘Ã£ Ä‘Æ°á»£c Ä‘Äƒng kÃ½ vá»›i trang admin.

Sau khi Ä‘Äƒng nháº­p, báº¡n cÃ³ thá»ƒ xem trang admin cá»§a model `Book`. HÃ£y thá»­ táº¡o má»™t cuá»‘n sÃ¡ch vá»›i nÃºt â€œAdd Bookâ€. Xem trang danh sÃ¡ch. Chá»‰nh sá»­a sÃ¡ch. XÃ³a sÃ¡ch. Báº¡n cÃ³ thá»ƒ tháº¥y chá»‰ vá»›i má»™t lÆ°á»£ng cÃ´ng viá»‡c ráº¥t nhá», Django Ä‘Ã£ cung cáº¥p cho báº¡n má»™t giao diá»‡n CRUD Ä‘áº§y Ä‘á»§ Ä‘á»ƒ tÆ°Æ¡ng tÃ¡c vá»›i model cá»§a mÃ¬nh.

ChÃºng ta vá»«a thÃªm má»™t `ModelAdmin` Ä‘Æ¡n giáº£n nháº¥t cÃ³ thá»ƒ. ThÃ¢n class chá»‰ cÃ³ `pass` mÃ  khÃ´ng cÃ³ thuá»™c tÃ­nh nÃ o. Django cung cáº¥p cho chÃºng ta ráº¥t nhiá»u tÃ¹y chá»n Ä‘á»ƒ kiá»ƒm soÃ¡t cÃ¡ch cÃ¡c trang admin cho `Book` hoáº¡t Ä‘á»™ng. HÃ£y cÃ¹ng Ä‘iá»ƒm qua má»™t sá»‘ thuá»™c tÃ­nh admin thÆ°á»ng dÃ¹ng.

## TÃ¹y Biáº¿n Trang Admin Cá»§a Báº¡n

Giá»‘ng nhÆ° nhiá»u pháº§n khÃ¡c cá»§a Django, framework sá»­ dá»¥ng cÃ¡c thuá»™c tÃ­nh cáº¥p class Ä‘á»ƒ xÃ¡c Ä‘á»‹nh hÃ nh vi cá»§a má»™t class. KhÃ¡c vá»›i forms vÃ  models, nÆ¡i cÃ¡c thuá»™c tÃ­nh cáº¥p class chá»§ yáº¿u lÃ  cÃ¡c trÆ°á»ng mÃ  báº¡n tá»± Ä‘á»‹nh nghÄ©a, cÃ¡c class `ModelAdmin` cung cáº¥p giÃ¡ trá»‹ cho cÃ¡c thuá»™c tÃ­nh Ä‘Ã£ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a rÃµ trong tÃ i liá»‡u. CÃ¡c thuá»™c tÃ­nh nÃ y Ä‘Ã³ng vai trÃ² nhÆ° cÃ¡c â€œhookâ€ cho phÃ©p báº¡n tÃ¹y biáº¿n hÃ nh vi cá»§a cÃ¡c trang admin.

Viá»‡c táº¡o ra cÃ¡c trang admin hiá»‡u quáº£ chá»§ yáº¿u lÃ  sá»­ dá»¥ng cÃ¡c thuá»™c tÃ­nh nÃ y Ä‘á»ƒ class `ModelAdmin` hoáº¡t Ä‘á»™ng nhÆ° báº¡n muá»‘n. Do Ä‘Ã³, lÃ m chá»§ trang admin Django lÃ  lÃ m chá»§ cÃ¡c tÃ¹y chá»n `ModelAdmin` Ä‘Æ°á»£c liá»‡t kÃª [trong tÃ i liá»‡u](https://docs.djangoproject.com/en/4.1/ref/contrib/admin/#modeladmin-options). Danh sÃ¡ch nÃ y khÃ¡ dÃ i, nhÆ°ng Ä‘á»«ng náº£n chÃ­! TÃ´i nghÄ© báº¡n cÃ³ thá»ƒ táº­n dá»¥ng khoáº£ng 80% giÃ¡ trá»‹ cá»§a Django admin chá»‰ vá»›i má»™t sá»‘ Ã­t tÃ¹y chá»n.

Khi báº¡n thá»­ nghá»‹ch cÃ¡c trang `Book`, cÃ³ láº½ báº¡n nháº­n tháº¥y danh sÃ¡ch sÃ¡ch khÃ¡ Ä‘Æ¡n Ä‘iá»‡u. Danh sÃ¡ch máº·c Ä‘á»‹nh trÃ´ng giá»‘ng nhÆ° má»™t loáº¡t liÃªn káº¿t hiá»ƒn thá»‹ `Book object (#)`. ChÃºng ta cÃ³ thá»ƒ thay Ä‘á»•i giao diá»‡n vÃ  tÃ­nh há»¯u dá»¥ng cá»§a trang nÃ y vá»›i má»™t vÃ i thiáº¿t láº­p khÃ¡c nhau.

HÃ£y báº¯t Ä‘áº§u vá»›i `list_display`. Thuá»™c tÃ­nh `ModelAdmin` nÃ y kiá»ƒm soÃ¡t nhá»¯ng trÆ°á»ng nÃ o sáº½ xuáº¥t hiá»‡n trÃªn trang danh sÃ¡ch. Vá»›i vÃ­ dá»¥ model sÃ¡ch, chÃºng ta cÃ³ thá»ƒ thÃªm trÆ°á»ng tiÃªu Ä‘á» vÃ o trang.

```python
# application/admin.py

@admin.register(Book)
class BookAdmin(admin.ModelAdmin):
    list_display = ('id', 'title')
```

Django sáº½ biáº¿n trÆ°á»ng Ä‘Æ°á»£c liá»‡t kÃª Ä‘áº§u tiÃªn thÃ nh liÃªn káº¿t mÃ  ngÆ°á»i dÃ¹ng cÃ³ thá»ƒ nháº¥p Ä‘á»ƒ xem trang chi tiáº¿t admin cho báº£n ghi model. Trong vÃ­ dá»¥ nÃ y, tÃ´i dÃ¹ng trÆ°á»ng `id` lÃ m liÃªn káº¿t, nhÆ°ng tÃ´i cÅ©ng cÃ³ thá»ƒ dÃ¹ng tuple chá»‰ cÃ³ má»™t pháº§n tá»­ `('title',)` Ä‘á»ƒ trang chá»‰ hiá»ƒn thá»‹ tiÃªu Ä‘á» vÃ  tiÃªu Ä‘á» lÃ  liÃªn káº¿t.

ÄÃ´i khi báº¡n sáº½ cÃ³ loáº¡i model mÃ  báº¡n chá»‰ muá»‘n xem má»™t táº­p con cÃ¡c báº£n ghi. Giáº£ sá»­ model `Book` cÃ³ thÃªm trÆ°á»ng category.

```python
# application/models.py

class Book(models.Model):
    class Category(
        models.IntegerChoices
    ):
        SCI_FI = 1
        FANTASY = 2
        MYSTERY = 3
        NON_FICTION = 4

    # ... title vÃ  author nhÆ° trÆ°á»›c

    category = models.IntegerField(
        choices=Category.choices,
        default=Category.SCI_FI
    )
```

Báº±ng cÃ¡ch sá»­ dá»¥ng thuá»™c tÃ­nh `list_filter`, chÃºng ta cÃ³ thá»ƒ cho phÃ©p trang danh sÃ¡ch admin lá»c theo category mÃ  mÃ¬nh muá»‘n.

```python
# application/admin.py

@admin.register(Book)
class BookAdmin(admin.ModelAdmin):
    list_display = ('id', 'title')
    list_filter = ('category',)
```

TÃ¹y chá»n nÃ y sáº½ Ä‘áº·t má»™t thanh bÃªn á»Ÿ phÃ­a bÃªn pháº£i trang admin. Trong thanh bÃªn Ä‘Ã³, báº¡n sáº½ tháº¥y cÃ¡c category mÃ  tÃ´i Ä‘Ã£ Ä‘Æ°a vÃ o class choices `Category`. Náº¿u tÃ´i nháº¥p vÃ o liÃªn káº¿t â€œFantasyâ€, trÃ¬nh duyá»‡t sáº½ chuyá»ƒn Ä‘áº¿n `/admin/application/book/?category__exact=2` vÃ  chá»‰ hiá»ƒn thá»‹ cÃ¡c dÃ²ng dá»¯ liá»‡u cÃ³ category phÃ¹ há»£p.

ÄÃ¢y khÃ´ng pháº£i lÃ  kiá»ƒu lá»c duy nháº¥t mÃ  admin cÃ³ thá»ƒ lÃ m. ChÃºng ta cÅ©ng cÃ³ thá»ƒ lá»c theo thá»i gian vá»›i trÆ°á»ng `date_hierarchy`. Tiáº¿p theo, hÃ£y thÃªm trÆ°á»ng `published_date` cho model.

```python
# application/models.py

class Book(models.Model):
    # ... title, author, category

    published_date = models.DateField(
        default=datetime.date.today
    )
```

ChÃºng ta cÅ©ng cÃ³ thá»ƒ thay Ä‘á»•i `ModelAdmin` Ä‘á»ƒ sá»­ dá»¥ng trÆ°á»ng má»›i nÃ y.

```python
# application/admin.py

@admin.register(Book)
class BookAdmin(admin.ModelAdmin):
    date_hierarchy = "published_date"
    list_display = ("id", "title")
    list_filter = ("category",)
```

Báº±ng cÃ¡ch thÃªm thuá»™c tÃ­nh `date_hierarchy`, trang danh sÃ¡ch sáº½ cÃ³ thÃªm má»™t sá»‘ thÃ nh pháº§n giao diá»‡n má»›i. á» phÃ­a trÃªn cÃ¹ng trang sáº½ cÃ³ cÃ¡c bá»™ chá»n giÃºp lá»c theo khoáº£ng thá»i gian mong muá»‘n. ÄÃ¢y lÃ  má»™t cÃ¡ch ráº¥t há»¯u Ã­ch Ä‘á»ƒ duyá»‡t qua báº£ng dá»¯ liá»‡u cá»§a báº¡n.

ChÃºng ta váº«n cÃ³ thá»ƒ Ä‘i xa hÆ¡n ná»¯a. CÃ³ thá»ƒ báº¡n muá»‘n táº¥t cáº£ sÃ¡ch Ä‘Æ°á»£c sáº¯p xáº¿p theo tiÃªu Ä‘á». Ngay cáº£ khi thuá»™c tÃ­nh `ordering` khÃ´ng Ä‘Æ°á»£c Ä‘áº·t trong meta options cá»§a model, `ModelAdmin` cÅ©ng cÃ³ thuá»™c tÃ­nh `ordering` riÃªng.

_â€œMetaâ€ lÃ  gÃ¬?_ NgoÃ i cÃ¡c trÆ°á»ng, má»™t model Django cÃ³ thá»ƒ thiáº¿t láº­p thÃ´ng tin bá»• sung vá» cÃ¡ch xá»­ lÃ½ dá»¯ liá»‡u. CÃ¡c tÃ¹y chá»n bá»• sung nÃ y lÃ  cÃ¡c thuá»™c tÃ­nh â€œmetaâ€ cá»§a model. Má»™t model Django thÃªm thÃ´ng tin meta báº±ng cÃ¡ch khai bÃ¡o má»™t class lá»“ng `Meta` trong model. Xem [Model Meta options](https://docs.djangoproject.com/en/4.1/ref/models/options/) Ä‘á»ƒ biáº¿t thÃªm cÃ¡c tÃ­nh nÄƒng tÃ¹y biáº¿n hÃ nh vi model.

```python
# application/admin.py

@admin.register(Book)
class BookAdmin(admin.ModelAdmin):
    date_hierarchy = "published_date"
    list_display = ("id", "title")
    list_filter = ("category",)
    ordering = ("title",)
```

Vá»›i thiáº¿t láº­p nÃ y, táº¥t cáº£ sÃ¡ch trÃªn trang sáº½ Ä‘Æ°á»£c sáº¯p xáº¿p theo tiÃªu Ä‘á». Thuá»™c tÃ­nh `ordering` sáº½ thÃªm má»™t má»‡nh Ä‘á» `ORDER BY` phÃ¹ há»£p vÃ o truy váº¥n cÆ¡ sá»Ÿ dá»¯ liá»‡u thÃ´ng qua `QuerySet` do admin sinh ra.

TÃ¹y chá»n cuá»‘i cÃ¹ng tiá»‡n lá»£i cho trang danh sÃ¡ch mÃ  tÃ´i muá»‘n nháº¥n máº¡nh lÃ  `search_fields`.

```python
# application/admin.py

@admin.register(Book)
class BookAdmin(admin.ModelAdmin):
    date_hierarchy = "published_date"
    list_display = ("id", "title")
    list_filter = ("category",)
    ordering = ("title",)
    search_fields = ("author",)
```

Vá»›i tÃ¹y chá»n nÃ y, trang danh sÃ¡ch sáº½ cÃ³ thÃªm má»™t thanh tÃ¬m kiáº¿m á»Ÿ phÃ­a trÃªn. Trong vÃ­ dá»¥ nÃ y, tÃ´i thÃªm kháº£ nÄƒng tÃ¬m kiáº¿m dá»±a trÃªn tÃ¡c giáº£ cá»§a sÃ¡ch.

Khi báº¡n tÃ¬m kiáº¿m, URL káº¿t quáº£ cÃ³ thá»ƒ trÃ´ng nhÆ° `/admin/application/book/?q=tolkien`. Django sáº½ thá»±c hiá»‡n tÃ¬m kiáº¿m khÃ´ng phÃ¢n biá»‡t hoa thÆ°á»ng trÃªn trÆ°á»ng Ä‘Ã³. `QuerySet` sáº½ giá»‘ng nhÆ°:

```python
search_results = Book.objects.filter(
    author__icontains="tolkien"
)
```

Káº¿t quáº£ nÃ y sáº½ khÃ´ng thá»ƒ cáº¡nh tranh vá»›i má»™t cÃ´ng cá»¥ tÃ¬m kiáº¿m chuyÃªn dá»¥ng, nhÆ°ng cÃ³ Ä‘Æ°á»£c má»™t tÃ­nh nÄƒng tÃ¬m kiáº¿m á»•n chá»‰ vá»›i má»™t dÃ²ng mÃ£ lÃ  ráº¥t tuyá»‡t!

`ModelAdmin` cÅ©ng bao gá»“m má»™t sá»‘ thiáº¿t láº­p há»¯u Ã­ch Ä‘á»ƒ thay Ä‘á»•i hÃ nh vi cá»§a trang chi tiáº¿t cá»§a tá»«ng báº£n ghi cÆ¡ sá»Ÿ dá»¯ liá»‡u.

VÃ­ dá»¥, giáº£ sá»­ model `Book` cÃ³ má»™t trÆ°á»ng `ForeignKey` Ä‘á»ƒ theo dÃµi biÃªn táº­p viÃªn.

```python
# application/models.py
from django.contrib.auth.models import User

class Book(models.Model):
    # ... title, author, category
    # published_date nhÆ° trÆ°á»›c

    editor = models.ForeignKey(
        User,
        null=True,
        blank=True,
        on_delete=models.CASCADE
    )
```

TrÃªn trang admin cá»§a má»™t cuá»‘n sÃ¡ch cá»¥ thá»ƒ, trÆ°á»ng `editor` sáº½ máº·c Ä‘á»‹nh lÃ  má»™t dropdown. TrÆ°á»ng nÃ y sáº½ bao gá»“m má»i báº£n ghi `User` trong á»©ng dá»¥ng cá»§a báº¡n. Náº¿u báº¡n cÃ³ má»™t trang phá»• biáº¿n vá»›i hÃ ng ngÃ n hoáº·c hÃ ng triá»‡u ngÆ°á»i dÃ¹ng, trang nÃ y sáº½ bá»‹ â€œngháº½nâ€ khi táº£i táº¥t cáº£ cÃ¡c báº£n ghi user vÃ o dropdown Ä‘Ã³.

Thay vÃ¬ cÃ³ má»™t trang vÃ´ dá»¥ng khÃ´ng thá»ƒ táº£i ná»•i, báº¡n cÃ³ thá»ƒ dÃ¹ng `raw_id_fields`.

```python
# application/admin.py

@admin.register(Book)
class BookAdmin(admin.ModelAdmin):
    date_hierarchy = "published_date"
    list_display = ("id", "title")
    list_filter = ("category",)
    ordering = ("title",)
    raw_id_fields = ("editor",)
    search_fields = ("author",)
```

Báº±ng cÃ¡ch sá»­ dá»¥ng `raw_id_fields`, admin sáº½ chuyá»ƒn tá»« dropdown sang má»™t Ã´ nháº­p liá»‡u cÆ¡ báº£n hiá»ƒn thá»‹ khÃ³a ngoáº¡i cá»§a báº£n ghi user. Viá»‡c nhÃ¬n tháº¥y má»™t sá»‘ khÃ³a ngoáº¡i thÃ¬ khÃ´ng trá»±c quan báº±ng viá»‡c tháº¥y tÃªn thá»±c táº¿ trong dropdown, nhÆ°ng tÃ¹y chá»n `raw_id_fields` bá»• sung hai tÃ­nh nÄƒng Ä‘á»ƒ cáº£i thiá»‡n Ä‘iá»u nÃ y.

1. CÃ³ má»™t biá»ƒu tÆ°á»£ng tÃ¬m kiáº¿m. Náº¿u ngÆ°á»i dÃ¹ng nháº¥p vÃ o biá»ƒu tÆ°á»£ng nÃ y, má»™t cá»­a sá»• popup sáº½ xuáº¥t hiá»‡n cho phÃ©p ngÆ°á»i dÃ¹ng tÃ¬m kiáº¿m báº£n ghi trong má»™t giao diá»‡n chá»n riÃªng.
2. Náº¿u báº£n ghi Ä‘Ã£ cÃ³ khÃ³a ngoáº¡i cho trÆ°á»ng nÃ y, thÃ¬ chuá»—i biá»ƒu diá»…n cá»§a báº£n ghi sáº½ hiá»ƒn thá»‹ bÃªn cáº¡nh biá»ƒu tÆ°á»£ng.

Má»™t tÃ¹y chá»n khÃ¡c cÅ©ng há»¯u Ã­ch lÃ  `prepopulated_fields`. á» pháº§n bÃ n vá» URLs, chÃºng ta Ä‘Ã£ nÃ³i vá» trÆ°á»ng slug. Slug thÆ°á»ng Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ táº¡o URL thÃ¢n thiá»‡n cho trang chi tiáº¿t hiá»ƒn thá»‹ má»™t instance model. HÃ£y thÃªm trÆ°á»ng `SlugField` vÃ o model `Book`.

```python
# application/models.py

class Book(models.Model):
    # ... title, author, category
    # published_date, editor nhÆ° trÆ°á»›c

    slug = models.SlugField()
```

Lá»£i Ã­ch cá»§a `prepopulated_fields` lÃ  gÃ¬? Báº±ng cÃ¡ch sá»­ dá»¥ng tÃ¹y chá»n nÃ y, chÃºng ta cÃ³ thá»ƒ hÆ°á»›ng dáº«n trang admin tá»± Ä‘á»™ng Ä‘iá»n trÆ°á»ng `slug` dá»±a trÃªn trÆ°á»ng `title` cá»§a sÃ¡ch. ÄÃ¢y lÃ  cáº­p nháº­t cho `ModelAdmin`.

```python
# application/admin.py

@admin.register(Book)
class BookAdmin(admin.ModelAdmin):
    date_hierarchy = "published_date"
    list_display = ("id", "title")
    list_filter = ("category",)
    ordering = ("title",)
    prepopulated_fields = {"slug": ("title",)}
    raw_id_fields = ("editor",)
    search_fields = ("author",)
```

BÃ¢y giá» khi báº¡n muá»‘n thÃªm má»™t cuá»‘n sÃ¡ch má»›i trong admin, Django sáº½ sá»­ dá»¥ng JavaScript Ä‘á»ƒ cáº­p nháº­t trÆ°á»ng slug Ä‘á»™ng khi báº¡n gÃµ tiÃªu Ä‘á»!

Äáº¿n Ä‘Ã¢y, má»i thuá»™c tÃ­nh mÃ  chÃºng ta thÃªm vÃ o admin Ä‘á»u lÃ  cáº¥u hÃ¬nh tÄ©nh. Náº¿u báº¡n muá»‘n thay Ä‘á»•i hÃ nh vi cÃ¡c trang admin dá»±a trÃªn Ä‘iá»u gÃ¬ Ä‘Ã³ Ä‘á»™ng thÃ¬ sao?

May máº¯n thay, nhÃ³m phÃ¡t triá»ƒn Django cÅ©ng Ä‘Ã£ nghÄ© Ä‘áº¿n Ä‘iá»u nÃ y. Táº¥t cáº£ cÃ¡c tÃ¹y chá»n mÃ  chÃºng ta vá»«a xem Ä‘á»u cÃ³ má»™t phÆ°Æ¡ng thá»©c tÆ°Æ¡ng á»©ng mÃ  báº¡n cÃ³ thá»ƒ override, Ä‘Æ°á»£c báº¯t Ä‘áº§u báº±ng tiá»n tá»‘ `get_`. VÃ­ dá»¥, náº¿u báº¡n muá»‘n kiá»ƒm soÃ¡t cÃ¡c trÆ°á»ng mÃ  ngÆ°á»i dÃ¹ng nhÃ¬n tháº¥y trÃªn trang danh sÃ¡ch dá»±a trÃªn há» lÃ  ai, báº¡n sáº½ cÃ i Ä‘áº·t `get_list_display`. Trong phÆ°Æ¡ng thá»©c Ä‘Ã³, báº¡n sáº½ tráº£ vá» má»™t tuple dá»±a trÃªn quyá»n truy cáº­p cá»§a ngÆ°á»i dÃ¹ng.

```python
# application/admin.py
from django.contrib import admin

from .models import Book

@admin.register(Book)
class BookAdmin(admin.ModelAdmin):
    ...

    def get_list_display(self, request):
        if request.user.is_superuser:
            return (
                'id',
                'title',
                'author',
                'category',
            )

        return ('id', 'title')
```

Má»™t thuá»™c tÃ­nh cuá»‘i cÃ¹ng cáº§n xem xÃ©t lÃ  `inlines`. TÃ´i khÃ´ng thÆ°á»ng xuyÃªn dÃ¹ng tÃ¹y chá»n nÃ y, nhÆ°ng nÃ³ lÃ  má»™t cÃ¡ch tiá»‡n lá»£i Ä‘á»ƒ xem _cÃ¡c_ model khÃ¡c cÃ³ liÃªn quan Ä‘áº¿n má»™t model cá»¥ thá»ƒ.

Giáº£ sá»­ á»©ng dá»¥ng máº«u cá»§a chÃºng ta cÃ³ cÃ¡c Ä‘Ã¡nh giÃ¡ cho sÃ¡ch. ChÃºng ta cÃ³ thá»ƒ thÃªm má»™t model nhÆ° sau:

```python
# application/models.py

class Review(models.Model):
    book = models.ForeignKey(
        Book,
        on_delete=models.CASCADE
    )
    rating = models.IntegerField()
    comment = models.TextField()
```

Äá»ƒ hiá»ƒn thá»‹ cÃ¡c model khÃ¡c trÃªn trang chi tiáº¿t, chÃºng ta cáº§n táº¡o má»™t class inline vÃ  Ä‘Æ°a nÃ³ vÃ o `ModelAdmin`. Káº¿t quáº£ nhÆ° sau:

```python
# application/admin.py
from django.contrib import admin

from .models import Book, Review

class ReviewInline(admin.TabularInline):
    model = Review

@admin.register(Book)
class BookAdmin(admin.ModelAdmin):
    date_hierarchy = "published_date"
    inlines = [ReviewInline]
    list_display = ("id", "title")
    list_filter = ("category",)
    ordering = ("title",)
    raw_id_fields = ("editor",)
    prepopulated_fields = {"slug": ("title",)}
    search_fields = ("author",)
```

Báº±ng cÃ¡ch thÃªm class inline vÃ o danh sÃ¡ch `inlines`, trang chi tiáº¿t sáº½ hiá»ƒn thá»‹ má»i Ä‘Ã¡nh giÃ¡ liÃªn quan Ä‘áº¿n má»™t cuá»‘n sÃ¡ch. NgoÃ i ra, báº¡n cÅ©ng cÃ³ thá»ƒ táº¡o Ä‘Ã¡nh giÃ¡ má»›i ngay tá»« trang chi tiáº¿t vÃ¬ admin sáº½ tá»± Ä‘á»™ng thÃªm má»™t vÃ i form trá»‘ng.

ChÃºng ta Ä‘Ã£ Ä‘á» cáº­p Ä‘áº¿n nhiá»u tÃ¹y chá»n cá»§a class `ModelAdmin` mÃ  báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng Ä‘á»ƒ tÃ¹y biáº¿n tráº£i nghiá»‡m admin vá»›i cÃ¡c chá»©c nÄƒng phá»• biáº¿n mÃ  nhiá»u cÃ´ng cá»¥ quáº£n trá»‹ yÃªu cáº§u. **Váº­y cÃ²n cÃ¡c chá»©c nÄƒng _khÃ´ng phá»• biáº¿n_ thÃ¬ sao?** Äá»ƒ tÃ¹y biáº¿n thÃªm, chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c hÃ nh Ä‘á»™ng admin.

## Thá»±c Hiá»‡n HÃ nh Äá»™ng Trong Admin

Khi báº¡n muá»‘n thá»±c hiá»‡n cÃ¡c cÃ´ng viá»‡c liÃªn quan Ä‘áº¿n cÃ¡c báº£n ghi cá»¥ thá»ƒ trong cÆ¡ sá»Ÿ dá»¯ liá»‡u, Django cung cáº¥p má»™t sá»‘ ká»¹ thuáº­t Ä‘á»ƒ tÃ¹y biáº¿n trang vÃ  cung cáº¥p cÃ¡c kháº£ nÄƒng Ä‘Ã³. CÃ¡c tÃ¹y biáº¿n nÃ y Ä‘Æ°á»£c gá»i lÃ  _actions_ (hÃ nh Ä‘á»™ng) vÃ  chÃºng xuáº¥t hiá»‡n trÃªn trang danh sÃ¡ch phÃ­a trÃªn danh sÃ¡ch báº£n ghi.

Trong trang admin máº·c Ä‘á»‹nh, cÃ³ má»™t hÃ nh Ä‘á»™ng cho phÃ©p quáº£n trá»‹ viÃªn xÃ³a báº£n ghi. Náº¿u báº¡n chá»n má»™t sá»‘ dÃ²ng báº±ng cÃ¡c checkbox á»Ÿ bÃªn trÃ¡i, chá»n â€œDelete selected <object type>â€, rá»“i nháº¥n â€œGoâ€, báº¡n sáº½ Ä‘Æ°á»£c chuyá»ƒn Ä‘áº¿n má»™t trang xÃ¡c nháº­n viá»‡c xÃ³a cÃ¡c dÃ²ng Ä‘Ã£ chá»n.

Quy trÃ¬nh tÆ°Æ¡ng tá»± cÃ³ thá»ƒ Ã¡p dá»¥ng cho báº¥t ká»³ hÃ nh Ä‘á»™ng nÃ o báº¡n muá»‘n thá»±c hiá»‡n trÃªn cÃ¡c báº£n ghi cÆ¡ sá»Ÿ dá»¯ liá»‡u. ChÃºng ta cÃ³ thá»ƒ lÃ m Ä‘iá»u nÃ y báº±ng cÃ¡ch thÃªm má»™t phÆ°Æ¡ng thá»©c vÃ o `ModelAdmin`.

PhÆ°Æ¡ng thá»©c nÃ y pháº£i tuÃ¢n theo giao diá»‡n sau:

```python
@admin.register(MyModel)
class MyModelAdmin(admin.ModelAdmin):
    actions = ['do_some_action']

    def do_some_action(
            self,
            request: HttpRequest,
            queryset: QuerySet
        ) -> Optional[HttpResponse]:
        # Thá»±c hiá»‡n cÃ´ng viá»‡c á»Ÿ Ä‘Ã¢y.
        ...
```

Queryset sáº½ Ä‘áº¡i diá»‡n cho táº­p há»£p cÃ¡c báº£n ghi model mÃ  ngÆ°á»i dÃ¹ng Ä‘Ã£ chá»n. Náº¿u phÆ°Æ¡ng thá»©c tráº£ vá» `None`, ngÆ°á»i dÃ¹ng sáº½ Ä‘Æ°á»£c tráº£ vá» cÃ¹ng trang admin. Náº¿u phÆ°Æ¡ng thá»©c tráº£ vá» má»™t `HttpResponse`, ngÆ°á»i dÃ¹ng sáº½ tháº¥y response Ä‘Ã³ (giá»‘ng nhÆ° trang xÃ¡c nháº­n xÃ³a cá»§a hÃ nh Ä‘á»™ng xÃ³a). Báº¡n cÃ³ thá»ƒ lÃ m báº¥t cá»© Ä‘iá»u gÃ¬ giá»¯a lÃºc phÆ°Æ¡ng thá»©c Ä‘Æ°á»£c gá»i vÃ  lÃºc nÃ³ tráº£ vá».

CÃ³ thá»ƒ á»©ng dá»¥ng sÃ¡ch máº«u cá»§a chÃºng ta muá»‘n Ä‘áº·t má»™t cuá»‘n sÃ¡ch lÃ m sÃ¡ch ná»•i báº­t trÃªn trang nhÆ° má»™t tá»±a sÃ¡ch má»›i quan trá»ng. Trong ká»‹ch báº£n giáº£ Ä‘á»‹nh nÃ y, chÃºng ta cÃ³ thá»ƒ cÃ³ mÃ£ Ä‘á»ƒ bá» chá»n cÃ¡c sÃ¡ch ná»•i báº­t cÅ© hoáº·c gá»­i email cho nhá»¯ng ngÆ°á»i quan tÃ¢m khi cÃ³ sÃ¡ch ná»•i báº­t má»›i.

Vá»›i ká»‹ch báº£n nÃ y, chÃºng ta cÃ³ thá»ƒ thÃªm má»™t action Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c viá»‡c Ä‘Ã³.

```python
# application/admin.py

def update_premiere(book):
    """Giáº£ vá» cáº­p nháº­t sÃ¡ch thÃ nh sÃ¡ch ná»•i báº­t.

    HÃ m nÃ y chá»‰ Ä‘á»ƒ minh há»a cho rÃµ rÃ ng.
    Trong á»©ng dá»¥ng thá»±c táº¿, cÃ³ thá»ƒ lÃ  má»™t phÆ°Æ¡ng thá»©c manager
    cáº­p nháº­t sÃ¡ch vÃ  gá»­i thÃ´ng bÃ¡o email
    (vÃ­ dá»¥: `Book.objects.update_premiere(book)`).
    """
    print(f"Update {book.title} state to change premiere books.")
    print("Call some background task to notify interested users via email.")

@admin.register(Book)
class BookAdmin(admin.ModelAdmin):
    actions = ["set_premiere"]
    date_hierarchy = "published_date"
    inlines = [ReviewInline]
    list_display = ("id", "title")
    list_filter = ("category",)
    ordering = ("title",)
    raw_id_fields = ("editor",)
    prepopulated_fields = {"slug": ("title",)}
    search_fields = ("author",)

    def set_premiere(
        self,
        request,
        queryset
    ):
        if len(queryset) == 1:
            book = queryset[0]
            update_premiere(book)
```

Django sáº½ dÃ¹ng tÃªn phÆ°Æ¡ng thá»©c Ä‘á»ƒ Ä‘áº·t nhÃ£n cho dropdown trÃªn trang danh sÃ¡ch. Trong trÆ°á»ng há»£p nÃ y, nhÃ£n hÃ nh Ä‘á»™ng sáº½ lÃ  â€œSet premiereâ€.

ChÃºng ta Ä‘Ã£ cÃ³ thá»ƒ má»Ÿ rá»™ng admin vÃ  tÃ­ch há»£p vÃ o giao diá»‡n ngÆ°á»i dÃ¹ng cá»§a trang báº±ng cÃ¡ch Ä‘á»‹nh nghÄ©a má»™t phÆ°Æ¡ng thá»©c vÃ  khai bÃ¡o nÃ³ lÃ  má»™t action. ÄÃ¢y lÃ  má»™t há»‡ thá»‘ng máº¡nh máº½ Ä‘á»ƒ trao quyá»n kiá»ƒm soÃ¡t cho quáº£n trá»‹ viÃªn vÃ  cho phÃ©p há» thao tÃ¡c theo cÃ¡ch tÃ¹y biáº¿n trÃªn dá»¯ liá»‡u trong á»©ng dá»¥ng.

## TÃ³m Táº¯t

Trong bÃ i viáº¿t nÃ y, chÃºng ta Ä‘Ã£ xem xÃ©t trang quáº£n trá»‹ tÃ­ch há»£p sáºµn cá»§a Django. Pháº§n má»Ÿ rá»™ng máº¡nh máº½ nÃ y cho phÃ©p chÃºng ta táº¡o, xem, chá»‰nh sá»­a vÃ  xÃ³a cÃ¡c dÃ²ng khá»i cÃ¡c báº£ng cÆ¡ sá»Ÿ dá»¯ liá»‡u liÃªn káº¿t vá»›i cÃ¡c model cá»§a á»©ng dá»¥ng.

ChÃºng ta Ä‘Ã£ Ä‘á» cáº­p Ä‘áº¿n:

- Django admin lÃ  gÃ¬ vÃ  cÃ¡ch thiáº¿t láº­p nÃ³
- CÃ¡ch lÃ m cho model cá»§a báº¡n xuáº¥t hiá»‡n trong admin
- CÃ¡ch tÃ¹y biáº¿n nhanh cÃ¡c trang admin vá»›i cÃ¡c tÃ¹y chá»n do class `ModelAdmin` cung cáº¥p
- CÃ¡ch táº¡o cÃ¡c hÃ nh Ä‘á»™ng bá»• sung cho phÃ©p báº¡n thao tÃ¡c trÃªn cÃ¡c báº£n ghi model

Láº§n tá»›i chÃºng ta sáº½ tÃ¬m hiá»ƒu giáº£i pháº«u má»™t á»©ng dá»¥ng Django. Má»™t dá»± Ã¡n Django Ä‘Æ°á»£c cáº¥u thÃ nh tá»« nhiá»u á»©ng dá»¥ng. ChÃºng ta sáº½ khÃ¡m phÃ¡:

- Cáº¥u trÃºc thÃ´ng thÆ°á»ng cá»§a má»™t á»©ng dá»¥ng Django
- CÃ¡ch Django nháº­n diá»‡n vÃ  táº£i cÃ¡c á»©ng dá»¥ng
- Táº¡i sao cÃ¡c á»©ng dá»¥ng láº¡i quan trá»ng Ä‘á»‘i vá»›i há»‡ sinh thÃ¡i Django
